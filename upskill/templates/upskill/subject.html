{% extends 'upskill/base/base.html' %}
{% load static %}

{%block mainPage%}
    Subjects
{%endblock%}

{%block variablePath%} Subjects {%endblock%}

{% block subject_content %}

<!-- Subject Courses Start -->
<div class="container-fluid py-5">
    <div class="container py-5">

        <!-- Subject header -->
        <div class="text-center mb-5">
            <h5 class="text-primary text-uppercase mb-2">{{ subject.title }}</h5>
            <h1>Ushbu subject bo‘yicha kurslar</h1>
        </div>

        <div class="row">
            {% for course in courses %}
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card course-card h-100 border-0 shadow-sm">

                        <!-- Course image -->
                        <div class="position-relative" style="height: 200px; overflow: hidden;">
                            <img class="card-img-top w-100 h-100" 
                                 src="{% if course.image %}{{ course.image.url }}{% else %}{% static 'upskill/img/courses-1.jpg' %}{% endif %}" 
                                 alt="{{ course.title }}"
                                 style="object-fit: cover;">
                            <!-- Price badge -->
                            <span class="badge badge-primary price-badge">$ {{ course.price }}</span>
                        </div>

                        <div class="card-body d-flex flex-column">

                            <!-- Subject -->
                            <small class="text-muted mb-1">{{ course.subject.title }}</small>

                            <!-- Title -->
                            <h5 class="card-title font-weight-bold">{{ course.title }}</h5>

                            <!-- Overview -->
                            <p class="card-text text-muted small">{{ course.overview|truncatewords:18 }}</p>

                            <!-- Detail button -->
                            {% if course.slug %}
                                <a href="{% url 'upskill:detail' course.slug %}" class="btn btn-outline-primary mt-auto">
                                    Kursni ko‘rish
                                </a>
                            {% else %}
                                <span class="btn btn-outline-secondary mt-auto disabled">Kurs mavjud emas</span>
                            {% endif %}
                        </div>

                        <!-- Card footer -->
                        <div class="card-footer bg-white border-0 d-flex justify-content-between">
                            <small class="text-muted">
                                <i class="fa fa-user"></i> {{ course.owner.full_name|default:"Instructor" }}
                            </small>
                            <small class="text-muted">
                                <i class="fa fa-calendar"></i> {{ course.created_at|date:"d M Y" }}
                            </small>
                        </div>

                    </div>
                </div>
            {% empty %}
                <div class="col-12 text-center">
                    <p class="text-muted">Bu subject uchun hozircha kurslar mavjud emas.</p>
                </div>
            {% endfor %}
        </div>

    </div>
</div>
<!-- Subject Courses End -->



{%endblock%}